---
title: Zustand y estado inmutable actualizaciones, objetos anidados y reemplazo de estado
description: Aprende c贸mo gestionar el estado inmutable en Zustand, c贸mo actualizar objetos anidados y cu谩ndo usar el flag replace para sobrescribir el estado. Mejores pr谩cticas con ejemplos claros.
---

## Estado inmutable y merging en Zustand

Al igual que con `useState` de React, en **Zustand** tambi茅n es necesario actualizar el estado de forma **inmutable**.

### Ejemplo t铆pico de actualizaci贸n de estado

```go:js
import { create } from 'zustand'

const useCountStore = create((set) => ({
  count: 0,
  inc: () => set((state) => ({ count: state.count + 1 })),
}))
```

La funci贸n `set` se utiliza para actualizar el estado dentro de la store.
Como el estado es inmutable, lo correcto ser铆a hacer algo como:

```go:js
set((state) => ({ ...state, count: state.count + 1 }))
```

Sin embargo, como este patr贸n es muy com煤n, **Zustand fusiona autom谩ticamente el estado**, por lo que puedes omitir `...state`:

```go:js
set((state) => ({ count: state.count + 1 }))
```

---

### Objetos anidados

La funci贸n `set` en Zustand **solo realiza la fusi贸n en un nivel** del estado.
Si trabajas con **objetos anidados**, deber谩s hacer la fusi贸n manualmente usando el operador spread (`...`):

```go:js
import { create } from 'zustand'

const useCountStore = create((set) => ({
  nested: { count: 0 },
  inc: () =>
    set((state) => ({
      nested: { ...state.nested, count: state.nested.count + 1 },
    })),
}))
```

 **Recomendaci贸n:**
Para casos m谩s complejos, puedes usar bibliotecas que te ayuden a manejar actualizaciones inmutables. Consulta recursos sobre c贸mo actualizar valores de estado anidados.

### Usar el flag `replace` para sobrescribir el estado

Si necesitas desactivar el comportamiento de fusi贸n del estado, puedes usar el par谩metro `replace` en la funci贸n `set`:

```js
set((state) => newState, true);
```

Esto reemplazar谩 completamente el estado en lugar de fusionarlo.
